<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Retro Emulator Hub</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
  body {
    margin: 0;
    background: #0d0d0d;
    color: #00ff00;
    font-family: 'Press Start 2P', monospace;
    text-align: center;
  }
  header {
    padding: 1rem;
    background: #111;
    border-bottom: 2px solid #00ff00;
  }
  .console-btn {
    margin: 0.5rem;
    padding: 0.5rem 1rem;
    border: 2px solid #00ff00;
    background:#111;
    color:#00ff00;
    cursor:pointer;
  }
  .console-btn:hover {
    background:#00ff00;
    color:#111;
  }
  #game {
    width: 80vw;
    height: 60vh;
    border:2px solid #00ff00;
    margin-top:1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background: black;
  }
</style>
</head>
<body>

<header><h1>Retro Emulator Hub</h1></header>

<p>Upload a ROM to play:</p>
<input type="file" id="romFile" accept=".zip,.nes,.sfc,.gba,.gb,.gba,.bin,.iso,.z64,.v64" onchange="autoStartEmu()" />

<div>
  <button class="console-btn" onclick="startEmu('nes')">NES</button>
  <button class="console-btn" onclick="startEmu('snes')">SNES</button>
  <button class="console-btn" onclick="startEmu('gba')">GBA</button>
  <button class="console-btn" onclick="startEmu('n64')">N64</button>
  <button class="console-btn" onclick="startEmu('psx')">PSX</button>
  <button class="console-btn" onclick="startEmu('gb')">Game Boy</button>
  <button class="console-btn" onclick="startEmu('genesis')">Genesis</button>
  <button class="console-btn" onclick="startEmu('sms')">Sega Master System</button>
  <button class="console-btn" onclick="startEmu('gg')">Game Gear</button>
</div>

<div id="game">
  <p style="color:#00ff00;">Upload a ROM or select a console above to start.</p>
</div>

<script>
// Auto-start when uploading a ROM
function autoStartEmu() {
  const file = document.getElementById("romFile").files[0];
  if (!file) return;

  // Ask for console type
  const consoleType = prompt("Enter console type (nes, snes, gba, n64, psx, gb, genesis, sms, gg)", "nes");
  if (!consoleType) return;

  startEmu(consoleType, file);
}

// Start emulator with optional file
function startEmu(core, file = null) {
  let romURL = null;
  if (file) {
    romURL = URL.createObjectURL(file);
  } else {
    alert("Select a ROM first or use the file upload.");
    return;
  }

  // Remove previous loader if exists
  const oldScript = document.querySelector('script[data-emulatorjs-loader]');
  if (oldScript) oldScript.remove();

  // EmulatorJS config
  window.EJS_player  = "#game";
  window.EJS_gameUrl = romURL;
  window.EJS_core    = core;
  window.EJS_pathtodata = "https://cdn.emulatorjs.org/stable/data/";

  // Load EmulatorJS loader
  const script = document.createElement("script");
  script.src = "https://cdn.emulatorjs.org/stable/data/loader.js";
  script.setAttribute("data-emulatorjs-loader", "true");
  document.body.appendChild(script);
}
</script>

</body>
</html>

