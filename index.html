<input type="file" id="romFile" accept=".zip,.nes,.sfc,.gba,.gb,.gba,.bin,.iso,.z64,.v64" onchange="autoStartEmu()" />

<script>
function autoStartEmu() {
  const file = document.getElementById("romFile").files[0];
  if (!file) return;

  // Ask the user which console this ROM is for
  const consoleType = prompt("Enter console type (nes, snes, gba, n64, psx, gb, etc.)", "nes");
  if (!consoleType) return;

  const romURL = URL.createObjectURL(file);

  // EmulatorJS config
  window.EJS_player  = "#game";
  window.EJS_gameUrl = romURL;
  window.EJS_core    = consoleType;
  window.EJS_pathtodata = "https://cdn.emulatorjs.org/stable/data/";

  // Remove any previous loader script
  const oldScript = document.querySelector('script[data-emulatorjs-loader]');
  if (oldScript) oldScript.remove();

  // Load EmulatorJS
  const script = document.createElement("script");
  script.src = "https://cdn.emulatorjs.org/stable/data/loader.js";
  script.setAttribute("data-emulatorjs-loader", "true");
  document.body.appendChild(script);
}
</script>
